<!DOCTYPE html>
<html lang="ru" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <title th:text="${book.name} + ' - –î–µ—Ç–∞–ª–∏ –∫–Ω–∏–≥–∏'">–î–µ—Ç–∞–ª–∏ –∫–Ω–∏–≥–∏</title>
    <link rel="stylesheet" th:href="@{/styles.css}">
    <!-- –ú–æ–∂–Ω–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—å –µ—â—ë Google —à—Ä–∏—Ñ—Ç—ã –¥–ª—è –∫—Ä–∞—Å–æ—Ç—ã -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* –ï—Å–ª–∏ —Ö–æ—á–µ—à—å –≤—Å—Ç–∞–≤–∏—Ç—å —á–∞—Å—Ç—å CSS –ø—Ä—è–º–æ –≤ —à–∞–±–ª–æ–Ω ‚Äì –º–æ–∂–Ω–æ */
        .book-details-container {
            display: flex;
            flex-wrap: wrap;
            gap: 2rem;
            padding: 2rem;
            font-family: 'Roboto', sans-serif;
        }
        .book-left, .book-right {
            background: #fff;
            padding: 1.5rem;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            border-radius: 8px;
        }
        /* –õ–µ–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞: —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —à–∏—Ä–∏–Ω–∞ –¥–ª—è –æ–±–ª–æ–∂–∫–∏ */
        .book-left {
            flex: 1 1 300px;
            max-width: 400px;
            text-align: center;
        }
        .book-left img {
            width: 100%;
            border-radius: 8px;
        }
        .book-meta {
            margin-top: 1rem;
            font-size: 1.1rem;
        }
        .book-meta span {
            display: block;
            margin-bottom: 0.5rem;
        }
        /* –ü—Ä–∞–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞: –≥–∏–±–∫–∏–π –±–ª–æ–∫ —Å –æ—Å—Ç–∞–ª—å–Ω—ã–º–∏ –¥–µ—Ç–∞–ª—è–º–∏ */
        .book-right {
            flex: 2 1 500px;
        }
        .book-title {
            font-size: 2rem;
            margin-bottom: 0.5rem;
            color: #333;
        }
        .book-info {
            margin-bottom: 1.5rem;
            color: #555;
        }
        .book-info span {
            display: inline-block;
            margin-right: 1.5rem;
            font-weight: 700;
        }
        .book-description {
            line-height: 1.6;
            margin-bottom: 1.5rem;
        }
        .book-extra {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
        }
        .extra-item {
            background: #f2f2f2;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-weight: 600;
            transition: background 0.3s;
        }
        .extra-item:hover {
            background: #e0e0e0;
        }
        .label {
            font-weight: 700;
            margin-right: 0.3rem;
        }
        .detail-links a {
            margin-right: 1rem;
            text-decoration: none;
            color: #4f93ce;
            font-weight: 700;
            transition: color 0.3s;
        }
        .detail-links a:hover {
            color: #28527a;
        }
        /* –ü—Ä–∏ –º–∞–ª–µ–Ω—å–∫–∏—Ö —ç–∫—Ä–∞–Ω–∞—Ö –∫–æ–ª–æ–Ω–∫–∏ —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–º–∏ */
        @media (max-width: 768px) {
            .book-details-container {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>

<header th:include="fragments/header :: header"></header>

<main>
    <div class="container book-details-container">

        <!-- –õ–µ–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ -->
        <div class="book-left">
            <img th:src="@{'/' + ${book.image}}" alt="–û–±–ª–æ–∂–∫–∞ –∫–Ω–∏–≥–∏"/>
            <div class="book-meta">
                <span th:text="'–°—Ç—Ä–∞–Ω–∏—Ü—ã: ' + ${book.page_count}">–°—Ç—Ä–∞–Ω–∏—Ü—ã: 350</span>



                <span class="age-badge" th:text="${book.age_restriction + '+'}">16+</span>
            </div>

            <span sec:authorize="isAuthenticated()">
            <form th:action="@{'/cart/add/' + ${book.id}}" method="post" style="width: 100%; margin-top: 1.5rem;">
                <button type="submit" class="add-to-cart-btn">–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É</button>
            </form>
            </span>

        </div>

        <!-- –ü—Ä–∞–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ -->
        <div class="book-right">
            <h1 class="book-title" th:text="${book.name}">–ù–∞–∑–≤–∞–Ω–∏–µ –∫–Ω–∏–≥–∏</h1>

            <!-- –ê–≤—Ç–æ—Ä—ã -->
            <div class="detail-links">
                <span class="label">–ê–≤—Ç–æ—Ä—ã:</span>
                <span th:each="author : ${book.authors}">
                    <a th:href="@{'/search?query=' + ${author.name} + ' ' + ${author.surname}}"
                       th:text="${author.name + ' ' + author.surname}">–ê–≤—Ç–æ—Ä</a>
                </span>

            <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
                <div class="book-stats">
                    <!--<div class="stat-item">
                        <div class="stat-icon">‚≠ê</div>
                        <div class="stat-number" th:text="${book.raiting}">4.5</div>
                        <div class="stat-label">–†–µ–π—Ç–∏–Ω–≥</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-icon">üìñ</div>
                        <div class="stat-number" th:text="${book.read_count}">1200</div>
                        <div class="stat-label">–ü—Ä–æ—á–∏—Ç–∞–Ω–æ</div>
                    </div>-->
                    <div class="stat-item">
                        <div class="stat-icon">üõí</div>
                        <div class="stat-number" th:text="${book.purchased_count}">300</div>
                        <div class="stat-label">–ö—É–ø–ª–µ–Ω–æ</div>
                    </div>
                </div>

            <!-- –î–∞—Ç–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ -->
            <div class="book-info" style="margin-top: 1.5rem;">
                <span><strong>–î–∞—Ç–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏:</strong> <span th:text="${book.published_data.toString()}">2025-04-15</span></span>
            </div>

            <!-- –û–ø–∏—Å–∞–Ω–∏–µ -->
            <div class="book-section">
                <h2 class="section-title">–û –∫–Ω–∏–≥–µ</h2>
                <div class="book-description" th:text="${book.description}">
                    –ó–¥–µ—Å—å –æ–ø–∏—Å–∞–Ω–∏–µ –∫–Ω–∏–≥–∏.
                </div>
            </div>

            <!-- –ñ–∞–Ω—Ä—ã -->
            <div class="book-section">
                <h2 class="section-title">–ñ–∞–Ω—Ä—ã</h2>
                <div class="detail-links">
            <span th:each="genre : ${book.genres}">
                <a th:href="@{'/search?query=' + ${genre.name}}" th:text="${genre.name}">–ñ–∞–Ω—Ä</a>
            </span>
                </div>
            </div>
        </div>


    </div>
</main>

<footer
        th:include="fragments/footer :: footer">
</footer>
</body>
</html>
